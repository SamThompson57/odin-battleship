(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{R:()=>S});const e=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div");function r(){const t=document.getElementById("announcer");!0!==S.gameOver&&(!1===S.mainState?t.textContent=`Place your (${S.shipArr[S.playerA.playerBoard.totalShips]} square long) Ship`:(t.textContent="Select a Square to attack",n.setAttribute("id","plyrA"),o.setAttribute("id","plyrB"),t.appendChild(e),e.appendChild(n),e.appendChild(o)))}const l="abcdefghij".split("");class i{constructor(t){this.location=t,this.contains=null,this.targetable=!0}}const a=(t,e)=>({board:function(){let n=[];for(let o=1;o<e+1;o++){let e=[];for(let n=0;n<t;n++){const t=new i(l[n]+o);e.push(t)}n.push(e)}return n}(),placeShip:function(t,e,n,o){console.log(e);const r=function(t){let e=[];const n=t.split(""),o=Number(n.slice(1).join("")),r=l.indexOf(n[0]);return e.push(o-1),e.push(r),e}(e);console.log(r);const i=r[0],a=r[1];let s=0,c=0;n>0?c=1:s=1;for(let e=0;e<t.length;e++){if(void 0===this.board[i+c*e]||void 0===this.board[i+c*e][a+s*e])return console.log("Illegal placement: Undefined Space"),!1;if(null!=this.board[i+c*e][a+s*e].contains)return console.log("Illegal placement: Space occupied"),!1}for(let e=0;e<t.length;e++)this.board[i+c*e][a+s*e].contains=t,"A"===o&&document.getElementById(`${l[a+s*e]}${i+c*e+1}${o}`).setAttribute("class","ship");return this.totalShips++,!0},receiveAttack:function(t,e,n){if(!0===S.gameOver)return!1;if(void 0===this.board[e-1]||void 0===this.board[e-1][t])return!1;if(!this.board[e-1][t].targetable)return!1;if(this.board[e-1][t].targetable=!1,this.attackedSpaces.push(this.board[e-1][t]),this.board[e-1][t].contains){this.board[e-1][t].contains.hit();const o=document.createElement("img");return document.getElementById(`${l[t]}${e}${n}`).appendChild(o),o.src="../img/hit.png",this.board[e-1][t].contains.isSunk()?(this.sunkShips++,this.noShipsLeft()?(S.gameOver=!0,document.getElementById("announcer").textContent="GAME OVER",S.announceWinner(n),"GAME OVER"):"SHIP SUNK"):"HIT"}const o=document.createElement("img");return document.getElementById(`${l[t]}${e}${n}`).appendChild(o),o.src="../img/close-box.png","MISS"},attackedSpaces:[],noShipsLeft:function(){return this.totalShips===this.sunkShips},totalShips:0,sunkShips:0}),s=t=>({length:t,hitsTaken:0,isSunk:function(){return this.hitsTaken>=this.length},hit:function(){this.hitsTaken++}}),c="abcdefghijklmnopqrstuvwxyz".split(""),d=()=>({takeTurn:function(t,e,n){return console.log(t),this.opponentBoard.receiveAttack(c.indexOf(t),e,n)},opponentBoard:null,playerBoard:null}),p=(t,e)=>{let n=function(){let n=[];for(let o=1;o<t+1;o++)for(let t=0;t<e;t++)n.push(c[t]+o);return n}();return{takeTurn:function(){const t=Math.floor(Math.random()*n.length),e=n[t].split("");n.splice(t,1);const o=e.slice(1).join(""),r=c.indexOf(e[0]),l=this.opponentBoard.receiveAttack(r,o,"A");return document.getElementById("plyrB").textContent=`Player B: ${c[r]+o} - ${l}`,S.nextTurn(),l},opponentBoard:null,playerBoard:null,availibleTargets:n,placeOwnShips:function(t){console.log(t);let e=[],o=n,r=n;e.push(o),e.push(r),t.forEach((t=>{let n=!1;for(;!n;){const o=Math.floor(2*Math.random()),r=Math.floor(Math.random()*e[o].length);this.playerBoard.placeShip(s(t),e[o][r],o,"B")&&(n=!0),console.log(n)}}))}}};let u=1;const h=function(t,e,n){const o=document.createElement("div");o.setAttribute("class","board"),o.setAttribute("id","board");for(let i=e;i>0;i--){const e=document.createElement("div");e.setAttribute("id",`row${i}`),e.setAttribute("class","row"),e.textContent=`${i}`,o.appendChild(e);for(let e=0;e<n;e++){const n=document.createElement("div");n.setAttribute("id",`${l[e]+i+t}`),(i+e)%2==1?n.setAttribute("class","B"===t?"red":"dark"):n.setAttribute("class","light"),o.appendChild(n),n.onmouseover=()=>{!1===S.mainState&&"A"===t?n.style.cursor=u?"url(../img/vert.png)25 10,auto":"url(../img/hor.png)25 10,auto":n.style.cursor="auto"},n.addEventListener("contextmenu",(function(t){t.preventDefault(),u=(u+1)%2}),!1),n.onclick=()=>{let t=n.id.split("");const e=t.splice(-1).join(""),o=t.splice(1).join(""),l=t[0];if(!0===S.mainState){if(console.log(n.id),"B"===e){const t=S.playerA.takeTurn(l,o,e);console.log(`STATUS: ${t}`),t&&(document.getElementById("plyrA").textContent=`Player A: ${l+o} - ${t}`,S.nextTurn())}}else"A"===e&&(S.playerA.playerBoard.placeShip(s(S.shipArr[S.playerA.playerBoard.totalShips]),l+o,u,"A"),S.playerA.playerBoard.totalShips>=S.shipArr.length&&(S.mainState=!0));r()}}}let i=l;return i.unshift(""),i.splice(n+1),i.forEach((t=>{const e=document.createElement("div");e.setAttribute("id",`col${t}`),e.setAttribute("class","col"),e.textContent=t,o.appendChild(e)})),i.shift(),o},m=document.getElementById("content"),g=document.createElement("div");g.setAttribute("id","announcer"),m.appendChild(g);const f=document.createElement("div");f.setAttribute("id","playerB");const y=document.createElement("div");y.setAttribute("id","playerA");const A=h("B",10,10),b=h("A",10,10);m.appendChild(y),m.appendChild(f),f.appendChild(b),y.appendChild(A);let S=((t,e,n,o)=>{const r=d(),l=t?p(e,n):d();r.playerBoard=a(e,n),l.playerBoard=a(e,n),r.opponentBoard=l.playerBoard,l.opponentBoard=r.playerBoard;l.placeOwnShips(o);let i=!0;return{playerA:r,playerB:l,mainState:false,announceWinner:function(t){console.log(false),"A"===t?console.log("Player B Wins"):console.log("Player A wins")},nextTurn:function(){this.gameOver||(console.log("next turn"),i=!i,!i&&t&&l.takeTurn())},gameOver:!1,shipArr:o}})(!0,10,10,[5,4,3,3,2]);r()})();