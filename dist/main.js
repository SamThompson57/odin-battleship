(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{R:()=>f});const e="abcdefghij".split("");class n{constructor(t){this.location=t,this.contains=null,this.targetable=!0}}const o=(t,o)=>({board:function(){let i=[];for(let r=1;r<o+1;r++){let o=[];for(let i=0;i<t;i++){const t=new n(e[i]+r);o.push(t)}i.push(o)}return i}(),placeShip:function(t,n,o,i,r){let a=0,s=0;i?s=1:a=1;for(let e=0;e<t.length;e++)if(void 0===this.board[o+s*e]||void 0===this.board[o+s*e][n+a*e]||null!==this.board[o+s*e][n+a*e].contains)return!1;for(let i=0;i<t.length;i++)this.board[o+s*i][n+a*i-1].contains=t,r&&document.getElementById(`${e[n+a*i-1]}${o+s*i+1}${r}`).setAttribute("class","ship");return this.totalShips++,!0},receiveAttack:function(t,n,o){if(console.log(`Y: ${n}, X: ${t}, Target: ${o}`),void 0===this.board[n-1]||void 0===this.board[n-1][t])return!1;if(!this.board[n-1][t].targetable)return!1;if(this.board[n-1][t].targetable=!1,this.attackedSpaces.push(this.board[n-1][t]),this.board[n-1][t].contains){this.board[n-1][t].contains.hit();const i=document.createElement("img");return document.getElementById(`${e[t]}${n}${o}`).appendChild(i),i.src="../img/hit.png",this.board[n-1][t].contains.isSunk()?(this.sunkShips++,"SHIP SUNK"):"HIT"}const i=document.createElement("img");return document.getElementById(`${e[t]}${n}${o}`).appendChild(i),i.src="../img/close-box.png","MISS"},attackedSpaces:[],noShipsLeft:function(){return this.totalShips===this.sunkShips},totalShips:0,sunkShips:0}),i="abcdefghijklmnopqrstuvwxyz".split(""),r=()=>({takeTurn:function(t,e,n){return console.log(t),this.opponentBoard.receiveAttack(i.indexOf(t),e,n)},opponentBoard:null,playerBoard:null}),a=(t,e)=>{let n=function(){let n=[];for(let o=1;o<t+1;o++)for(let t=0;t<e;t++)n.push(i[t]+o);return n}();return{takeTurn:function(){const t=Math.floor(Math.random()*n.length),e=n[t].split("");n.splice(t,1);const o=e.slice(1).join(""),r=i.indexOf(e[0]),a=this.opponentBoard.receiveAttack(r,o,"A");return f.nextTurn(),a},opponentBoard:null,playerBoard:null,availibleTargets:n}},s=t=>({length:t,hitsTaken:0,isSunk:function(){return this.hitsTaken>=this.length},hit:function(){this.hitsTaken++}}),l=function(t,n,o){const i=document.createElement("div");i.setAttribute("class","board"),i.setAttribute("id","board");for(let r=n;r>0;r--){const n=document.createElement("div");n.setAttribute("id",`row${r}`),n.setAttribute("class","row"),n.textContent=`${r}`,i.appendChild(n);for(let n=0;n<o;n++){const o=document.createElement("div");o.setAttribute("id",`${e[n]+r+t}`),(r+n)%2==1?o.setAttribute("class","B"===t?"red":"dark"):o.setAttribute("class","light"),i.appendChild(o),o.onclick=()=>{console.log(o.id);let t=o.id.split("");const e=t.splice(-1).join(""),n=t.splice(1).join(""),i=t[0];if("B"===e){const t=f.playerA.takeTurn(i,n,e);console.log(`STATUS: ${t}`),t&&f.nextTurn()}}}}let r=e;return r.unshift(""),r.splice(o+1),r.forEach((t=>{const e=document.createElement("div");e.setAttribute("id",`col${t}`),e.setAttribute("class","col"),e.textContent=t,i.appendChild(e)})),r.shift(),i},c=document.getElementById("content"),d=document.createElement("div");d.setAttribute("id","announcer"),c.appendChild(d),d.textContent="Select a square to attack";const u=document.createElement("div");u.setAttribute("id","playerB");const p=document.createElement("div");p.setAttribute("id","playerA");const h=l("B",10,10),b=l("A",10,10);c.appendChild(p),c.appendChild(u),u.appendChild(b),p.appendChild(h);let f=((t,e,n,i)=>{const l=r(),c=t?a(e,n):r();l.playerBoard=o(e,n),c.playerBoard=o(e,n),l.opponentBoard=c.playerBoard,c.opponentBoard=l.playerBoard;let d=!1;l.playerBoard.placeShip(s(i[0]),1,0,!0,"A"),c.playerBoard.placeShip(s(i[0]),5,5,!1,null),d=!0;let u=!0;return{playerA:l,playerB:c,mainState:!0,announceWinner:function(){},nextTurn:function(){console.log("next turn"),u=!u,!u&&t&&c.takeTurn()}}})(!0,10,10,[4])})();