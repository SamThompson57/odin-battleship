(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{R:()=>b});const e="abcdefghij".split("");class n{constructor(t){this.location=t,this.contains=null,this.targetable=!0}}const o=(t,o)=>({board:function(){let i=[];for(let r=1;r<o+1;r++){let o=[];for(let i=0;i<t;i++){const t=new n(e[i]+r);o.push(t)}i.push(o)}return i}(),placeShip:function(t,n,o,i,r){let a=0,l=0;i?l=1:a=1;for(let e=0;e<t.length;e++)if(void 0===this.board[o+l*e]||void 0===this.board[o+l*e][n+a*e]||null!==this.board[o+l*e][n+a*e].contains)return!1;for(let i=0;i<t.length;i++)this.board[o+l*i][n+a*i-1].contains=t,r&&document.getElementById(`${e[n+a*i-1]}${o+l*i}${r}`).setAttribute("class","ship");return this.totalShips++,!0},receiveAttack:function(t,n,o){if(console.log(`Y: ${n}, X: ${t}, Target: ${o}`),void 0===this.board[n]||void 0===this.board[n][t])return"404";if(!this.board[n][t].targetable)return"Already Shot here";if(this.board[n][t].targetable=!1,this.attackedSpaces.push(this.board[n][t]),this.board[n][t].contains){this.board[n][t].contains.hit();const i=document.createElement("img");return document.getElementById(`${e[t]}${n}${o}`).appendChild(i),i.src="../img/hit.png",this.board[n][t].contains.isSunk()?(this.sunkShips++,"SHIP SUNK"):"HIT"}const i=document.createElement("img");return document.getElementById(`${e[t]}${n}${o}`).appendChild(i),i.src="../img/close-box.png","MISS"},attackedSpaces:[],noShipsLeft:function(){return this.totalShips===this.sunkShips},totalShips:0,sunkShips:0}),i="abcdefghijklmnopqrstuvwxyz".split(""),r=()=>({takeTurn:function(t,e,n){return console.log(t),this.opponentBoard.receiveAttack(i.indexOf(t),e,n)},opponentBoard:null,playerBoard:null}),a=(t,e)=>{let n=function(){let n=[];for(let o=1;o<t+1;o++)for(let t=0;t<e;t++)n.push(i[t]+o);return n}();return{takeTurn:function(){const t=Math.floor(Math.random()*n.length),e=n[t].split("");return n.splice(t,1),this.opponentBoard.receiveAttack(e[1]-1,i.indexOf(e[0]),"A")},opponentBoard:null,playerBoard:null,availibleTargets:n}},l=t=>({length:t,hitsTaken:0,isSunk:function(){return this.hitsTaken>=this.length},hit:function(){this.hitsTaken++}}),s=function(t,n,o){const i=document.createElement("div");i.setAttribute("class","board"),i.setAttribute("id","board");for(let r=n;r>0;r--){const n=document.createElement("div");n.setAttribute("id",`row${r}`),n.setAttribute("class","row"),n.textContent=`${r}`,i.appendChild(n);for(let n=0;n<o;n++){const o=document.createElement("div");o.setAttribute("id",`${e[n]+r+t}`),(r+n)%2==1?o.setAttribute("class","B"===t?"red":"dark"):o.setAttribute("class","light"),i.appendChild(o),o.onclick=()=>{console.log(o.id);let t=o.id.split("");const e=t.splice(-1).join(""),n=t.splice(1).join(""),i=t[0];"B"===e&&(console.log(`Attacking ${i+n}`),console.log(b.playerA.takeTurn(i,n,e)))}}}let r=e;return r.unshift(""),r.splice(o+1),r.forEach((t=>{const e=document.createElement("div");e.setAttribute("id",`col${t}`),e.setAttribute("class","col"),e.textContent=t,i.appendChild(e)})),r.shift(),i},c=document.getElementById("content"),d=document.createElement("div");d.setAttribute("id","playerB");const p=document.createElement("div");p.setAttribute("id","playerA");const u=s("B",10,10),h=s("A",10,10);c.appendChild(p),c.appendChild(d),d.appendChild(h),p.appendChild(u);let b=((t,e,n,i)=>{const s=r(),c=t?a(e,n):r();s.playerBoard=o(e,n),c.playerBoard=o(e,n),s.opponentBoard=c.playerBoard,c.opponentBoard=s.playerBoard;let d=!1;return s.playerBoard.placeShip(l(i[0]),3,5,!0,"A"),c.playerBoard.placeShip(l(i[0]),5,5,!1,null),d=!0,{playerA:s,playerB:c,mainState:!0,announceWinner:function(){}}})(!0,10,10,[4])})();