(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{R:()=>m});const e="abcdefghij".split("");class n{constructor(t){this.location=t,this.contains=null,this.targetable=!0}}const o=(t,o)=>({board:function(){let r=[];for(let i=1;i<o+1;i++){let o=[];for(let r=0;r<t;r++){const t=new n(e[r]+i);o.push(t)}r.push(o)}return r}(),placeShip:function(t,n,o,r){console.log(n);const i=function(t){let n=[];const o=t.split(""),r=Number(o.slice(1).join("")),i=e.indexOf(o[0]);return n.push(r-1),n.push(i),n}(n);console.log(i);const l=i[0],a=i[1];let s=0,c=0;o>0?c=1:s=1;for(let e=0;e<t.length;e++){if(void 0===this.board[l+c*e]||void 0===this.board[l+c*e][a+s*e])return console.log("Illegal placement: Undefined Space"),!1;if(null!=this.board[l+c*e][a+s*e].contains)return console.log("Illegal placement: Space occupied"),!1}for(let n=0;n<t.length;n++)this.board[l+c*n][a+s*n].contains=t,"A"===r&&document.getElementById(`${e[a+s*n]}${l+c*n+1}${r}`).setAttribute("class","ship");return this.totalShips++,!0},receiveAttack:function(t,n,o){if(!0===m.gameOver)return!1;if(void 0===this.board[n-1]||void 0===this.board[n-1][t])return!1;if(!this.board[n-1][t].targetable)return!1;if(this.board[n-1][t].targetable=!1,this.attackedSpaces.push(this.board[n-1][t]),this.board[n-1][t].contains){this.board[n-1][t].contains.hit();const r=document.createElement("img");return document.getElementById(`${e[t]}${n}${o}`).appendChild(r),r.src="../img/hit.png",this.board[n-1][t].contains.isSunk()?(this.sunkShips++,this.noShipsLeft()?(m.gameOver=!0,document.getElementById("announcer").textContent="GAME OVER",m.announceWinner(o),"GAME OVER"):"SHIP SUNK"):"HIT"}const r=document.createElement("img");return document.getElementById(`${e[t]}${n}${o}`).appendChild(r),r.src="../img/close-box.png","MISS"},attackedSpaces:[],noShipsLeft:function(){return this.totalShips===this.sunkShips},totalShips:0,sunkShips:0}),r=t=>({length:t,hitsTaken:0,isSunk:function(){return this.hitsTaken>=this.length},hit:function(){this.hitsTaken++}}),i="abcdefghijklmnopqrstuvwxyz".split(""),l=()=>({takeTurn:function(t,e,n){return console.log(t),this.opponentBoard.receiveAttack(i.indexOf(t),e,n)},opponentBoard:null,playerBoard:null}),a=(t,e)=>{let n=function(){let n=[];for(let o=1;o<t+1;o++)for(let t=0;t<e;t++)n.push(i[t]+o);return n}();return{takeTurn:function(){const t=Math.floor(Math.random()*n.length),e=n[t].split("");n.splice(t,1);const o=e.slice(1).join(""),r=i.indexOf(e[0]),l=this.opponentBoard.receiveAttack(r,o,"A");return m.nextTurn(),l},opponentBoard:null,playerBoard:null,availibleTargets:n,placeOwnShips:function(t){console.log(t);let e=[],o=n,i=n;e.push(o),e.push(i),t.forEach((t=>{let n=!1;for(;!n;){const o=Math.floor(2*Math.random()),i=Math.floor(Math.random()*e[o].length);this.playerBoard.placeShip(r(t),e[o][i],o,"B")&&(n=!0),console.log(n)}}))}}},s=function(t,n,o){const r=document.createElement("div");r.setAttribute("class","board"),r.setAttribute("id","board");for(let i=n;i>0;i--){const n=document.createElement("div");n.setAttribute("id",`row${i}`),n.setAttribute("class","row"),n.textContent=`${i}`,r.appendChild(n);for(let n=0;n<o;n++){const o=document.createElement("div");o.setAttribute("id",`${e[n]+i+t}`),(i+n)%2==1?o.setAttribute("class","B"===t?"red":"dark"):o.setAttribute("class","light"),r.appendChild(o),o.onclick=()=>{if(!0===m.mainState){console.log(o.id);let t=o.id.split("");const e=t.splice(-1).join(""),n=t.splice(1).join(""),r=t[0];if("B"===e){const t=m.playerA.takeTurn(r,n,e);console.log(`STATUS: ${t}`),t&&m.nextTurn()}}}}}let i=e;return i.unshift(""),i.splice(o+1),i.forEach((t=>{const e=document.createElement("div");e.setAttribute("id",`col${t}`),e.setAttribute("class","col"),e.textContent=t,r.appendChild(e)})),i.shift(),r},c=document.getElementById("content"),d=document.createElement("div");d.setAttribute("id","announcer"),c.appendChild(d),d.textContent="Select a square to attack";const p=document.createElement("div");p.setAttribute("id","playerB");const u=document.createElement("div");u.setAttribute("id","playerA");const h=s("B",10,10),f=s("A",10,10);c.appendChild(u),c.appendChild(p),p.appendChild(f),u.appendChild(h);let m=((t,e,n,i)=>{const s=l(),c=t?a(e,n):l();s.playerBoard=o(e,n),c.playerBoard=o(e,n),s.opponentBoard=c.playerBoard,c.opponentBoard=s.playerBoard;let d=!1;s.playerBoard.placeShip(r(i[0]),"a1",1,"A"),s.playerBoard.placeShip(r(i[1]),"b1",1,"A"),s.playerBoard.placeShip(r(i[2]),"c1",1,"A"),s.playerBoard.placeShip(r(i[3]),"d1",1,"A"),s.playerBoard.placeShip(r(i[4]),"j1",1,"A"),c.placeOwnShips(i),d=!0;let p=!0;return{playerA:s,playerB:c,mainState:true,announceWinner:function(t){console.log(true),"A"===t?console.log("Player B Wins"):console.log("Player A wins")},nextTurn:function(){this.gameOver||(console.log("next turn"),p=!p,!p&&t&&c.takeTurn())},gameOver:!1}})(!0,10,10,[5,4,3,3,2])})();